# Requirements: Scribe-Valet

**Defined:** 2026-02-15
**Core Value:** A user can reliably speak, get high-quality local AI output quickly, and use it immediately without running servers, opening ports, or depending on cloud services.

## v1 Requirements

Requirements for initial release. Each maps to roadmap phases.

### Dictation Capture and STT

- [ ] **DICT-01**: User can start and stop dictation with a configurable global hotkey.
- [ ] **DICT-02**: User hears an end-of-turn sound cue when dictation capture stops.
- [ ] **DICT-03**: User speech is transcribed locally without requiring internet access.
- [ ] **DICT-04**: User can select dictation input microphone from settings.
- [ ] **DICT-05**: Dictation mode has tools disabled by default unless user explicitly enables a narrow subset.
- [ ] **DICT-06**: Dictation mode uses narrow context by default (clipboard content and optional selected text only).

### Dictation Enrichment and Output

- [ ] **ENRH-01**: User dictation is automatically cleaned for punctuation, casing, and light rewrite while preserving meaning.
- [ ] **ENRH-02**: User receives raw transcript output if enrichment fails or times out.
- [ ] **ENRH-03**: If enrichment fails or times out, raw transcript is still pasted into the focused field and copied to clipboard.
- [ ] **OUTP-01**: User final dictation is inserted into the currently focused text field.
- [ ] **OUTP-02**: User final dictation is copied to system clipboard after insertion.
- [ ] **OUTP-03**: User can recover most recent dictation output if insertion fails.

### Assistant Core

- [ ] **ASST-01**: User can trigger assistant voice interaction with configurable hotkey behavior (push-to-talk or toggle).
- [ ] **ASST-02**: User assistant requests are transcribed locally.
- [ ] **ASST-03**: User receives assistant responses generated by a local LLM.
- [ ] **ASST-04**: User hears assistant responses via local TTS.
- [ ] **ASST-05**: User can review short assistant conversation history in the app UI.
- [ ] **ASST-06**: Assistant mode includes broader default context (clipboard and selected text when available).

### Tools and Governance

- [ ] **TOOL-01**: User can define tools in a configurable local Python tools file.
- [ ] **TOOL-02**: User can allow or disallow tools separately for Dictation mode and Assistant mode.
- [ ] **TOOL-03**: User can select allowed Assistant-mode tools with multi-select controls.
- [ ] **TOOL-04**: User sees tool invocation and outputs recorded in assistant history/logs.
- [ ] **TOOL-05**: Tool execution uses deterministic structured call format with no hidden actions.
- [ ] **TOOL-06**: User-defined tools support both synchronous and asynchronous implementations, with synchronous execution as default behavior.

### Runtime, Architecture, and Device Handling

- [ ] **ARCH-01**: Internal app components communicate via IPC only (named pipes/pipes), with no localhost HTTP services.
- [ ] **ARCH-02**: Worker process lifecycle includes robust handshake/versioning and automatic recovery after worker crash.
- [ ] **HARD-01**: User can choose compute device (Auto, CPU, GPU-0, GPU-1 when available).
- [ ] **HARD-02**: App gracefully falls back to CPU when GPU acceleration is unavailable.

### Onboarding and Settings

- [ ] **ONBD-01**: User sees first-launch onboarding with optional login that clearly states cloud sync is optional.
- [ ] **ONBD-02**: User can choose Light/Balanced/Power model preset after hardware scan highlights recommended option.
- [ ] **ONBD-03**: User can configure dictation hotkey, assistant hotkey, and optional mode-switch hotkey during onboarding.
- [ ] **ONBD-04**: User can configure dictation intensity, assistant reply length, tool autonomy behavior, and voice settings.
- [ ] **SETT-01**: User can edit onboarding choices later in quick and advanced settings.

### Model Lifecycle and Storage

- [ ] **MODL-01**: App checks for required model files at startup in configured model directory.
- [ ] **MODL-02**: App downloads missing model artifacts once and verifies integrity before use.
- [ ] **MODL-03**: App stores models, config, tools, and logs in clear separated directories with OS defaults and user override support.

### Optional Cloud History

- [ ] **CLD-01**: Logged-in users can sync dictation history containing raw transcript, enriched text, timestamps, and mode metadata.
- [ ] **CLD-02**: Logged-in users can sync assistant history containing turns, tool calls, text outputs, and timestamps.
- [ ] **CLD-03**: App stores no remote history when user is not logged in.
- [ ] **CLD-04**: App never uploads audio to cloud history storage.
- [ ] **CLD-05**: Optional cloud history is implemented with Convex storage and WorkOS AuthKit authentication.

## v2 Requirements

Deferred to future release. Tracked but not in current roadmap.

### Capture and Interaction Extensions

- **CAPX-01**: User can enable voice-activated dictation capture (VAD mode).
- **CAPX-02**: User can use expanded multilingual presets with fast profile switching.

### Platform and Ecosystem Extensions

- **ECOS-01**: User can connect tools through local MCP gateway integrations.
- **ECOS-02**: User can configure custom external endpoints and webhook automations.

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Docker or user-managed service orchestration | Violates plug-and-play local utility goal |
| Internal localhost HTTP services or open ports | Violates IPC-only architecture and attack-surface constraints |
| Mandatory account for core dictation/assistant | Core product must remain fully usable offline |
| Always-on wake word in v1 | High false-trigger/privacy complexity before core trust loop is proven |
| Full desktop macro/voice-control platform in v1 | Expands scope beyond dictation + assistant MVP |
| Multi-agent autonomous workflows in v1 | Reduces predictability and trust for first release |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| DICT-01 | Phase 4 | Pending |
| DICT-02 | Phase 4 | Pending |
| DICT-03 | Phase 4 | Pending |
| DICT-04 | Phase 4 | Pending |
| DICT-05 | Phase 4 | Pending |
| DICT-06 | Phase 4 | Pending |
| ENRH-01 | Phase 5 | Pending |
| ENRH-02 | Phase 5 | Pending |
| ENRH-03 | Phase 5 | Pending |
| OUTP-01 | Phase 5 | Pending |
| OUTP-02 | Phase 5 | Pending |
| OUTP-03 | Phase 5 | Pending |
| ASST-01 | Phase 6 | Pending |
| ASST-02 | Phase 6 | Pending |
| ASST-03 | Phase 6 | Pending |
| ASST-04 | Phase 6 | Pending |
| ASST-05 | Phase 6 | Pending |
| ASST-06 | Phase 6 | Pending |
| TOOL-01 | Phase 7 | Pending |
| TOOL-02 | Phase 7 | Pending |
| TOOL-03 | Phase 7 | Pending |
| TOOL-04 | Phase 7 | Pending |
| TOOL-05 | Phase 7 | Pending |
| TOOL-06 | Phase 7 | Pending |
| ARCH-01 | Phase 1 | Pending |
| ARCH-02 | Phase 1 | Pending |
| HARD-01 | Phase 3 | Pending |
| HARD-02 | Phase 3 | Pending |
| ONBD-01 | Phase 7 | Pending |
| ONBD-02 | Phase 7 | Pending |
| ONBD-03 | Phase 7 | Pending |
| ONBD-04 | Phase 7 | Pending |
| SETT-01 | Phase 7 | Pending |
| MODL-01 | Phase 2 | Pending |
| MODL-02 | Phase 2 | Pending |
| MODL-03 | Phase 2 | Pending |
| CLD-01 | Phase 8 | Pending |
| CLD-02 | Phase 8 | Pending |
| CLD-03 | Phase 8 | Pending |
| CLD-04 | Phase 8 | Pending |
| CLD-05 | Phase 8 | Pending |

**Coverage:**
- v1 requirements: 40 total
- Mapped to phases: 40
- Unmapped: 0

---
*Requirements defined: 2026-02-15*
*Last updated: 2026-02-15 after roadmap creation*
